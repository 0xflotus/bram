let Bram = require "./index"

let compileFromStdIn stream input =
  let onEnd =
    let output = Bram.compile input
    console.log output

  stream.on "end" onEnd

  let onData data =
    stream.off "end" onEnd

    let newInput = input + data
    compileFromStdIn stream newInput

  stream.once "data" onData

process.stdin.setEncoding "utf8"
compileFromStdIn process.stdin ""
