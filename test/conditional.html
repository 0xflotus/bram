<!doctype html>
<html>
<head>
  <title>conditionals tests</title>

  <script src="../node_modules/webcomponents.js/webcomponents-lite.min.js"></script>
  <link rel="import" href="../node_modules/mocha-test/mocha-test.html">
  <script src="../bram.js"></script>
</head>
<body>
<template id="conditional"><template if="{{condition}}">{{val}}</template></template>
<div id="host"></div>
<mocha-test>
<template>
  <script>
    describe('template[if]', function(){
      var hydrate = Bram.template(conditional);

      afterEach(function(){
        host.innerHTML = '';
      });

      describe('rendering', function(){
        var model;

        beforeEach(function(){
          model = Bram.model({ val: 'Wilbur' });
          host.appendChild(hydrate(model));
        });

        it('shows value when truthy', function(){
          model.condition = true;
          var val = host.firstChild.nextSibling

          assert.equal(val.nodeValue, 'Wilbur');
        });

        it('empties itself when falsey', function(){
          model.condition = true;
          model.condition = false;

          var val = host.firstChild.nextSibling;

          assert.equal(val, undefined, 'There is no val');
        });

        it('reinserts itself when going back to truthy', function(){
          model.condition = true;
          model.condition = false;
          model.condition = true;

          var val = host.firstChild.nextSibling;

          assert.equal(val.nodeValue, 'Wilbur');
        });
      });
    });
  </script>
</template>
</mocha-test>
</body>
</html>
